# ğŸ“ æ ¡å›­äºŒæ‰‹äº¤æ˜“ç³»ç»Ÿ
# Campus Trading System

<div align="center">

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Python](https://img.shields.io/badge/Python-3.10+-green.svg)
![Vue](https://img.shields.io/badge/Vue-3.4-brightgreen.svg)
![FastAPI](https://img.shields.io/badge/FastAPI-0.104+-teal.svg)
![Status](https://img.shields.io/badge/Status-95%25%20Complete-yellow.svg)

åŸºäº FastAPI + Vue3 + TypeScript çš„ç°ä»£åŒ–æ ¡å›­äºŒæ‰‹äº¤æ˜“å¹³å°

**ç‰¹è‰²ï¼šå››æ•°æ®åº“å¼‚æ„åŒæ­¥ â€¢ WebSocketå®æ—¶é€šçŸ¥ â€¢ AIæ™ºèƒ½å®šä»·**

[åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [éƒ¨ç½²æŒ‡å—](#-éƒ¨ç½²æŒ‡å—) â€¢ [å¼€å‘æ–‡æ¡£](#-å¼€å‘æ–‡æ¡£)

</div>

---

## ğŸ“– ç›®å½•

- [åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§)
- [æŠ€æœ¯æ ˆ](#-æŠ€æœ¯æ ˆ)
- [é¡¹ç›®ç»“æ„](#-é¡¹ç›®ç»“æ„)
- [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [ç¯å¢ƒé…ç½®](#-ç¯å¢ƒé…ç½®)
- [éƒ¨ç½²æŒ‡å—](#-éƒ¨ç½²æŒ‡å—)
- [APIæ–‡æ¡£](#-apiæ–‡æ¡£)
- [å¼€å‘æŒ‡å—](#-å¼€å‘æŒ‡å—)
- [å¸¸è§é—®é¢˜](#-å¸¸è§é—®é¢˜)
- [é¡¹ç›®çŠ¶æ€](#-é¡¹ç›®çŠ¶æ€)
- [è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)
- [è®¸å¯è¯](#-è®¸å¯è¯)

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ›ï¸ ç”¨æˆ·ç«¯ - æ·˜å®é£æ ¼äº¤æ˜“å¸‚åœº

#### å•†å“æµè§ˆä¸æœç´¢
- ğŸ“± **å•†å“å¸‚åœº** - 8å¤§åˆ†ç±»ã€ç½‘æ ¼/åˆ—è¡¨åŒè§†å›¾ã€æ™ºèƒ½åˆ†é¡µ
- ğŸ” **æ™ºèƒ½æœç´¢** - å®æ—¶æœç´¢å»ºè®®ã€æœç´¢å†å²ã€é«˜çº§ç­›é€‰
- ğŸ·ï¸ **å¤šç»´ç­›é€‰** - ä»·æ ¼åŒºé—´ã€æˆè‰²ç­›é€‰ã€5ç§æ’åºæ–¹å¼
- ğŸ“Š **æœç´¢ç»“æœ** - å…³é”®è¯é«˜äº®ã€ç›¸å…³åº¦æ’åºã€ç­›é€‰é¢æ¿

#### å•†å“äº¤æ˜“
- ğŸ–¼ï¸ **å•†å“è¯¦æƒ…** - å¤šå›¾è½®æ’­ã€è¯¦ç»†æè¿°ã€å–å®¶è¯„åˆ†ã€æ ‡ç­¾ç³»ç»Ÿ
- ğŸ’¬ **è¯„è®ºäº’åŠ¨** - å‘è¡¨è¯„è®ºã€æ¥¼ä¸­æ¥¼å›å¤ã€ä¹°å–æ²Ÿé€š
- ğŸ“ **å•†å“å‘å¸ƒ** - å¤šå›¾ä¸Šä¼ ã€æ™ºèƒ½åˆ†ç±»ã€æ ‡ç­¾ç®¡ç†ã€ç¼–è¾‘åŠŸèƒ½
- ğŸ¤ **äº¤æ˜“æµç¨‹** - åœ¨çº¿ä¸‹å•ã€è”ç³»å–å®¶ã€çº¿ä¸‹äº¤æ˜“ã€ç¡®è®¤æ”¶è´§

#### ä¸ªäººä¸­å¿ƒ
- ğŸ“¦ **æˆ‘çš„å•†å“** - åœ¨å”®ä¸­/å·²å”®å‡º/å·²ä¸‹æ¶çŠ¶æ€ç®¡ç†
- ğŸ’° **äº¤æ˜“è®°å½•** - æˆ‘ä¹°åˆ°çš„/æˆ‘å–å‡ºçš„è®¢å•è¿½è¸ª
- ğŸ’¬ **æ¶ˆæ¯ä¸­å¿ƒ** - å®æ—¶èŠå¤©ã€ä¼šè¯ç®¡ç†ã€æœªè¯»æç¤º
- ğŸ”” **é€šçŸ¥ä¸­å¿ƒ** - å®æ—¶é€šçŸ¥ã€æ¡Œé¢æé†’ã€éŸ³æ•ˆæç¤º
- ğŸ‘¤ **ä¸ªäººä¸»é¡µ** - ç”¨æˆ·ä¿¡æ¯ã€åœ¨å”®å•†å“ã€è¯„ä»·å±•ç¤º
- âš™ï¸ **è´¦å·è®¾ç½®** - èµ„æ–™ä¿®æ”¹ã€å¯†ç æ›´æ”¹ã€éšç§è®¾ç½®

#### äº’åŠ¨åŠŸèƒ½
- â­ **æ”¶è—ç³»ç»Ÿ** - æ”¶è—å•†å“ã€æ”¶è—åˆ—è¡¨ç®¡ç†
- ğŸ›’ **è´­ç‰©è½¦** - æ‰¹é‡åŠ è´­ã€å¿«é€Ÿä¸‹å•
- ğŸš¨ **ä¸¾æŠ¥åŠŸèƒ½** - è¿è§„ä¸¾æŠ¥ã€å†…å®¹å®¡æ ¸

### ğŸ”§ ç®¡ç†å‘˜ç«¯ - ç³»ç»Ÿç›‘æ§ä¸ç®¡ç†

#### æ•°æ®åº“åŒæ­¥ç›‘æ§ â­æ ¸å¿ƒç‰¹è‰²
- ğŸ“Š **åŒæ­¥çŠ¶æ€ç›‘æ§** - MySQL/PostgreSQL/MariaDB/SQLite å®æ—¶åŒæ­¥
- ğŸ”„ **å†²çªå¤„ç†** - ç‰ˆæœ¬å†²çªæ£€æµ‹ã€ä¹è§‚é”æ§åˆ¶ã€ä¸€è‡´æ€§æ ¡éªŒ
- ğŸ“ˆ **åŒæ­¥ç»Ÿè®¡** - æˆåŠŸç‡ã€å¤±è´¥ç‡ã€å»¶è¿Ÿç»Ÿè®¡ã€å¯è§†åŒ–å›¾è¡¨
- ğŸ¯ **å†²çªè§£å†³** - æ‰‹åŠ¨è§£å†³å†²çªã€è‡ªåŠ¨é‡è¯•æœºåˆ¶

#### ç³»ç»Ÿç®¡ç†
- ğŸ‘¥ **ç”¨æˆ·ç®¡ç†** - ç”¨æˆ·åˆ—è¡¨ã€çŠ¶æ€ç®¡ç†ã€æƒé™æ§åˆ¶
- ğŸ“Š **æ•°æ®çœ‹æ¿** - äº¤æ˜“ç»Ÿè®¡ã€ç”¨æˆ·æ´»è·ƒåº¦ã€æ”¶å…¥åˆ†æ
- ğŸ“ˆ **æ•°æ®åˆ†æ** - å›¾è¡¨å¯è§†åŒ–ã€è¶‹åŠ¿åˆ†æã€æŠ¥è¡¨ç”Ÿæˆ
- ğŸ—ƒï¸ **æ•°æ®è¡¨ç®¡ç†** - è¡¨ç»“æ„æŸ¥çœ‹ã€æ•°æ®å¢åˆ æ”¹æŸ¥
- âš™ï¸ **ç³»ç»Ÿè®¾ç½®** - ç³»ç»Ÿé…ç½®ã€å‚æ•°è°ƒæ•´
- ğŸ“ **å®¡è®¡æ—¥å¿—** - æ“ä½œè®°å½•ã€å®‰å…¨å®¡è®¡

### ğŸš€ æŠ€æœ¯äº®ç‚¹

1. **å››æ•°æ®åº“å¼‚æ„åŒæ­¥** â­
   - æ”¯æŒ MySQLã€PostgreSQLã€MariaDBã€SQLite å››ç§æ•°æ®åº“
   - åŸºäºä¹è§‚é”çš„å¹¶å‘æ§åˆ¶ï¼ˆç‰ˆæœ¬å·æœºåˆ¶ï¼‰
   - å®æ—¶å†²çªæ£€æµ‹å’Œå¤„ç†
   - æ•°æ®ä¸€è‡´æ€§ä¿è¯

2. **WebSocket å®æ—¶é€šä¿¡**
   - å®æ—¶æ¶ˆæ¯æ¨é€
   - åœ¨çº¿çŠ¶æ€åŒæ­¥
   - å¿ƒè·³ä¿æ´»æœºåˆ¶
   - å¤šè®¾å¤‡æ”¯æŒ

3. **æ¡Œé¢é€šçŸ¥é›†æˆ**
   - æµè§ˆå™¨åŸç”Ÿé€šçŸ¥
   - éŸ³æ•ˆæç¤º
   - é€šçŸ¥æŒä¹…åŒ–
   - è‡ªå®šä¹‰é€šçŸ¥ç±»å‹

4. **é«˜çº§æœç´¢å¼•æ“**
   - è‡ªåŠ¨å®Œæˆå»ºè®®
   - æœç´¢å†å²è®°å½•
   - é«˜çº§ç­›é€‰é¢æ¿
   - å…³é”®è¯é«˜äº®

5. **UI/UX ä¼˜åŒ–**
   - éª¨æ¶å±åŠ è½½
   - é¡µé¢è¿‡æ¸¡åŠ¨ç”»
   - å“åº”å¼è®¾è®¡
   - å‹å¥½çš„é”™è¯¯é¡µé¢

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| Python | 3.10+ | ä¸»è¦å¼€å‘è¯­è¨€ |
| FastAPI | 0.104+ | é«˜æ€§èƒ½ Web æ¡†æ¶ |
| SQLAlchemy | 2.0+ | ORM æ¡†æ¶ |
| Pydantic | 2.0+ | æ•°æ®éªŒè¯ |
| Alembic | - | æ•°æ®åº“è¿ç§» |
| PyMySQL | - | MySQL é©±åŠ¨ |
| psycopg2 | - | PostgreSQL é©±åŠ¨ |
| Redis | - | ç¼“å­˜ï¼ˆè®¡åˆ’ï¼‰ |
| uvicorn | - | ASGI æœåŠ¡å™¨ |

### å‰ç«¯æŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| Vue | 3.4+ | æ¸è¿›å¼æ¡†æ¶ |
| TypeScript | 5.0+ | ç±»å‹å®‰å…¨ |
| Vite | 5.0+ | æ„å»ºå·¥å…· |
| Naive UI | 2.38+ | UI ç»„ä»¶åº“ |
| Pinia | 2.1+ | çŠ¶æ€ç®¡ç† |
| Vue Router | 4.3+ | è·¯ç”±ç®¡ç† |
| Axios | - | HTTP å®¢æˆ·ç«¯ |
| UnoCSS | - | åŸå­åŒ– CSS |

### æ•°æ®åº“

- **MySQL** 8.0+ - ä¸»æ•°æ®åº“
- **PostgreSQL** 15+ - åŒæ­¥æ•°æ®åº“
- **MariaDB** 10+ - åŒæ­¥æ•°æ®åº“
- **SQLite** 3+ - åŒæ­¥æ•°æ®åº“

### åŸºç¡€è®¾æ–½

- **Docker** - å®¹å™¨åŒ–éƒ¨ç½²
- **Docker Compose** - å¤šå®¹å™¨ç¼–æ’
- **Nginx** - åå‘ä»£ç†ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
Campus_Trading_System/
â”œâ”€â”€ backend/                    # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ apps/                   # åº”ç”¨æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ ai_service/        # AIå®šä»·æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ api_gateway/       # APIç½‘å…³
â”‚   â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ models/        # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ config.py      # é…ç½®ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ database.py    # æ•°æ®åº“è¿æ¥
â”‚   â”‚   â”‚   â”œâ”€â”€ security.py    # å®‰å…¨è®¤è¯
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ inventory_service/ # åº“å­˜æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ monitoring_service/# ç›‘æ§æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ sync_manager.py    # åŒæ­¥ç®¡ç†å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ websocket.py       # WebSocketæœåŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ sync_service/      # åŒæ­¥æœåŠ¡
â”‚   â”‚   â””â”€â”€ trade_service/     # äº¤æ˜“æœåŠ¡
â”‚   â”œâ”€â”€ alembic/               # æ•°æ®åº“è¿ç§»
â”‚   â”œâ”€â”€ sql/                   # SQLè„šæœ¬
â”‚   â”‚   â”œâ”€â”€ mysql_complete_schema.sql      # MySQLå»ºè¡¨
â”‚   â”‚   â”œâ”€â”€ postgres_complete_schema.sql   # PostgreSQLå»ºè¡¨
â”‚   â”‚   â”œâ”€â”€ mariadb_complete_schema.sql    # MariaDBå»ºè¡¨
â”‚   â”‚   â”œâ”€â”€ sqlite_complete_schema.sql     # SQLiteå»ºè¡¨
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ requirements.txt       # ä¾èµ–åˆ—è¡¨
â”‚   â”œâ”€â”€ Dockerfile            # Dockeré…ç½®
â”‚   â””â”€â”€ start.sh              # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ frontend/                  # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/       # ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminLayout.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ UserLayout.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ UserNavbar.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ NotificationCenter.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ SearchAutocomplete.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ skeletons/    # éª¨æ¶å±ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ views/            # é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ MarketplaceView.vue    # å•†å“å¸‚åœº
â”‚   â”‚   â”‚   â”œâ”€â”€ ItemDetailView.vue     # å•†å“è¯¦æƒ…
â”‚   â”‚   â”‚   â”œâ”€â”€ PublishItemView.vue    # å‘å¸ƒå•†å“
â”‚   â”‚   â”‚   â”œâ”€â”€ MessagesView.vue       # æ¶ˆæ¯ä¸­å¿ƒ
â”‚   â”‚   â”‚   â”œâ”€â”€ SearchResultsView.vue  # æœç´¢ç»“æœ
â”‚   â”‚   â”‚   â”œâ”€â”€ SyncMonitorView.vue    # åŒæ­¥ç›‘æ§
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ stores/           # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts       # è®¤è¯çŠ¶æ€
â”‚   â”‚   â”‚   â”œâ”€â”€ notification.ts # é€šçŸ¥çŠ¶æ€
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ router/           # è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ lib/              # å·¥å…·åº“
â”‚   â”‚   â”‚   â”œâ”€â”€ http.ts       # HTTPå°è£…
â”‚   â”‚   â”‚   â””â”€â”€ utils.ts      # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ App.vue
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ vite.config.ts
â”œâ”€â”€ scripts/                   # è„šæœ¬
â”‚   â”œâ”€â”€ backup.sh             # æ•°æ®å¤‡ä»½
â”‚   â””â”€â”€ restore.sh            # æ•°æ®æ¢å¤
â”œâ”€â”€ docker-compose.yml        # Dockerç¼–æ’
â”œâ”€â”€ PROJECT_STATUS.md         # é¡¹ç›®çŠ¶æ€æ¸…å•
â””â”€â”€ README.md                 # æœ¬æ–‡ä»¶
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šDocker éƒ¨ç½²ï¼ˆæ¨èï¼‰

**é€‚åˆï¼š** å¿«é€Ÿä½“éªŒã€æ¼”ç¤ºã€ç”Ÿäº§éƒ¨ç½²

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/lll-hhh/Campus_Trading_System.git
cd Campus_Trading_System

# 2. å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# 3. æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# 4. è®¿é—®ç³»ç»Ÿ
# å‰ç«¯: http://localhost:5174
# APIæ–‡æ¡£: http://localhost:8001/docs
# ç®¡ç†å‘˜è´¦å·: admin / admin123
# æ™®é€šç”¨æˆ·: user1 / password123
```

æœåŠ¡è¯´æ˜ï¼š
- **frontend** - å‰ç«¯æœåŠ¡ï¼ˆç«¯å£ 5174ï¼‰
- **backend** - åç«¯APIï¼ˆç«¯å£ 8001ï¼‰
- **mysql** - MySQLæ•°æ®åº“ï¼ˆç«¯å£ 3306ï¼‰
- **postgres** - PostgreSQLæ•°æ®åº“ï¼ˆç«¯å£ 5432ï¼‰
- **mariadb** - MariaDBæ•°æ®åº“ï¼ˆç«¯å£ 3307ï¼‰

### æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘éƒ¨ç½²

**é€‚åˆï¼š** åŠŸèƒ½å¼€å‘ã€è°ƒè¯•ã€äºŒæ¬¡å¼€å‘

#### å‰ç½®è¦æ±‚

- Python 3.10+
- Node.js 18+
- MySQL 8.0+ï¼ˆè‡³å°‘ä¸€ä¸ªæ•°æ®åº“ï¼‰
- Git

#### åç«¯å¯åŠ¨

```bash
# 1. è¿›å…¥åç«¯ç›®å½•
cd backend

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ– venv\Scripts\activate  # Windows

# 3. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 4. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“è¿æ¥ç­‰

# 5. åˆå§‹åŒ–æ•°æ®åº“
# å¯¼å…¥ SQL è„šæœ¬ï¼ˆé€‰æ‹©å¯¹åº”çš„æ•°æ®åº“ï¼‰
mysql -u root -p < sql/mysql_complete_schema.sql
mysql -u root -p < sql/mysql_complete_inserts.sql

# 6. è¿è¡Œæ•°æ®åº“è¿ç§»
alembic upgrade head

# 7. å¯åŠ¨åç«¯æœåŠ¡
uvicorn apps.api_gateway.main:app --reload --host 0.0.0.0 --port 8001
```

#### å‰ç«¯å¯åŠ¨

```bash
# 1. è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# 2. å®‰è£…ä¾èµ–
npm install

# 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# 4. è®¿é—®ç³»ç»Ÿ
# http://localhost:5174
```

### æ–¹å¼ä¸‰ï¼šç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

è¯¦è§ [éƒ¨ç½²æŒ‡å—](#-éƒ¨ç½²æŒ‡å—) ç« èŠ‚

---

## âš™ï¸ ç¯å¢ƒé…ç½®

### åç«¯ç¯å¢ƒå˜é‡ (.env)

```bash
# åº”ç”¨é…ç½®
APP_NAME=Campus Trading System
APP_VERSION=1.0.0
DEBUG=True
SECRET_KEY=your-secret-key-here-change-in-production

# æ•°æ®åº“é…ç½® - MySQL (ä¸»æ•°æ®åº“)
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_USER=root
MYSQL_PASSWORD=your_password
MYSQL_DATABASE=campus_trading

# æ•°æ®åº“é…ç½® - PostgreSQL (åŒæ­¥æ•°æ®åº“)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_password
POSTGRES_DATABASE=campus_trading

# æ•°æ®åº“é…ç½® - MariaDB (åŒæ­¥æ•°æ®åº“)
MARIADB_HOST=localhost
MARIADB_PORT=3307
MARIADB_USER=root
MARIADB_PASSWORD=your_password
MARIADB_DATABASE=campus_trading

# æ•°æ®åº“é…ç½® - SQLite (åŒæ­¥æ•°æ®åº“)
SQLITE_PATH=./campus_trading.db

# JWTé…ç½®
JWT_SECRET_KEY=your-jwt-secret-key
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=1440

# æ–‡ä»¶ä¸Šä¼ é…ç½®
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=10485760  # 10MB

# CORSé…ç½®
CORS_ORIGINS=["http://localhost:5174","http://localhost:3000"]

# Redisé…ç½®ï¼ˆå¯é€‰ï¼‰
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# æ—¥å¿—é…ç½®
LOG_LEVEL=INFO
LOG_FILE=./logs/app.log
```

### å‰ç«¯ç¯å¢ƒå˜é‡ (.env)

```bash
# APIé…ç½®
VITE_API_BASE_URL=http://localhost:8001
VITE_WS_BASE_URL=ws://localhost:8001

# åº”ç”¨é…ç½®
VITE_APP_TITLE=æ ¡å›­äºŒæ‰‹äº¤æ˜“ç³»ç»Ÿ
VITE_APP_DESCRIPTION=åŸºäºVue3çš„æ ¡å›­äº¤æ˜“å¹³å°
```

---

## ğŸ“¦ éƒ¨ç½²æŒ‡å—

### Docker ç”Ÿäº§éƒ¨ç½²

#### 1. å‡†å¤‡å·¥ä½œ

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/lll-hhh/Campus_Trading_System.git
cd Campus_Trading_System

# é…ç½®ç¯å¢ƒå˜é‡
cp backend/.env.example backend/.env
# ç¼–è¾‘ backend/.envï¼Œè®¾ç½®ç”Ÿäº§ç¯å¢ƒé…ç½®

# ä¿®æ”¹ docker-compose.yml ä¸­çš„å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯
```

#### 2. æ„å»ºå’Œå¯åŠ¨

```bash
# æ„å»ºé•œåƒ
docker-compose build

# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps
```

#### 3. åˆå§‹åŒ–æ•°æ®åº“

```bash
# è¿›å…¥åç«¯å®¹å™¨
docker-compose exec backend bash

# è¿è¡Œè¿ç§»
alembic upgrade head

# é€€å‡ºå®¹å™¨
exit
```

#### 4. é…ç½® Nginxï¼ˆå¯é€‰ï¼‰

```nginx
# /etc/nginx/sites-available/campus-trading

server {
    listen 80;
    server_name your-domain.com;

    # å‰ç«¯
    location / {
        proxy_pass http://localhost:5174;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    # API
    location /api {
        proxy_pass http://localhost:8001;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    # WebSocket
    location /api/v1/ws {
        proxy_pass http://localhost:8001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
}
```

#### 5. æ•°æ®å¤‡ä»½

```bash
# æ‰‹åŠ¨å¤‡ä»½
./scripts/backup.sh

# è®¾ç½®å®šæ—¶å¤‡ä»½ï¼ˆcrontabï¼‰
0 2 * * * /path/to/Campus_Trading_System/scripts/backup.sh
```

### ä¼ ç»Ÿéƒ¨ç½²ï¼ˆæ—  Dockerï¼‰

#### 1. åç«¯éƒ¨ç½²

```bash
# å®‰è£…ç³»ç»Ÿä¾èµ–
sudo apt-get update
sudo apt-get install python3.10 python3-pip python3-venv
sudo apt-get install mysql-server postgresql

# åˆ›å»ºåº”ç”¨ç›®å½•
sudo mkdir -p /var/www/campus-trading
cd /var/www/campus-trading

# å…‹éš†ä»£ç 
git clone https://github.com/lll-hhh/Campus_Trading_System.git .

# å®‰è£…Pythonä¾èµ–
cd backend
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env

# åˆå§‹åŒ–æ•°æ®åº“
mysql -u root -p < sql/mysql_complete_schema.sql
mysql -u root -p < sql/mysql_complete_inserts.sql
alembic upgrade head

# ä½¿ç”¨ systemd ç®¡ç†æœåŠ¡
sudo nano /etc/systemd/system/campus-trading-backend.service
```

**systemd æœåŠ¡é…ç½®ï¼š**

```ini
[Unit]
Description=Campus Trading Backend
After=network.target mysql.service

[Service]
Type=simple
User=www-data
WorkingDirectory=/var/www/campus-trading/backend
Environment="PATH=/var/www/campus-trading/backend/venv/bin"
ExecStart=/var/www/campus-trading/backend/venv/bin/uvicorn apps.api_gateway.main:app --host 0.0.0.0 --port 8001 --workers 4
Restart=always

[Install]
WantedBy=multi-user.target
```

```bash
# å¯åŠ¨æœåŠ¡
sudo systemctl daemon-reload
sudo systemctl start campus-trading-backend
sudo systemctl enable campus-trading-backend
sudo systemctl status campus-trading-backend
```

#### 2. å‰ç«¯éƒ¨ç½²

```bash
cd /var/www/campus-trading/frontend

# å®‰è£…Node.js 18+
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# å®‰è£…ä¾èµ–
npm install

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# å°†æ„å»ºäº§ç‰©éƒ¨ç½²åˆ°Nginx
sudo cp -r dist/* /var/www/html/
```

**Nginx é…ç½®ï¼š**

```nginx
server {
    listen 80;
    server_name your-domain.com;
    root /var/www/html;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    location /api {
        proxy_pass http://127.0.0.1:8001;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }

    location /api/v1/ws {
        proxy_pass http://127.0.0.1:8001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
    }
}
```

```bash
# æµ‹è¯•é…ç½®
sudo nginx -t

# é‡å¯Nginx
sudo systemctl restart nginx
```

---

## ğŸ“š APIæ–‡æ¡£

### è®¿é—® Swagger æ–‡æ¡£

å¯åŠ¨åç«¯æœåŠ¡åï¼Œè®¿é—®ï¼š

- **Swagger UI:** http://localhost:8001/docs
- **ReDoc:** http://localhost:8001/redoc

### API ç«¯ç‚¹æ¦‚è§ˆ

<details>
<summary><b>è®¤è¯ç›¸å…³</b></summary>

- `POST /api/v1/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/v1/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /api/v1/auth/refresh` - åˆ·æ–°Token
</details>

<details>
<summary><b>ç”¨æˆ·ç›¸å…³</b></summary>

- `GET /api/v1/users/me` - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
- `PUT /api/v1/users/me` - æ›´æ–°ç”¨æˆ·ä¿¡æ¯
- `GET /api/v1/users/{user_id}` - è·å–ç”¨æˆ·è¯¦æƒ…
- `POST /api/v1/users/avatar` - ä¸Šä¼ å¤´åƒ
- `PUT /api/v1/users/password` - ä¿®æ”¹å¯†ç 
</details>

<details>
<summary><b>å•†å“ç›¸å…³</b></summary>

- `GET /api/v1/items` - è·å–å•†å“åˆ—è¡¨
- `GET /api/v1/items/{item_id}` - è·å–å•†å“è¯¦æƒ…
- `POST /api/v1/items` - å‘å¸ƒå•†å“
- `PUT /api/v1/items/{item_id}` - æ›´æ–°å•†å“
- `DELETE /api/v1/items/{item_id}` - åˆ é™¤å•†å“
- `GET /api/v1/items/search` - æœç´¢å•†å“
- `POST /api/v1/items/{item_id}/favorite` - æ”¶è—å•†å“
</details>

<details>
<summary><b>äº¤æ˜“ç›¸å…³</b></summary>

- `POST /api/v1/orders` - åˆ›å»ºè®¢å•
- `GET /api/v1/orders` - è·å–è®¢å•åˆ—è¡¨
- `GET /api/v1/orders/{order_id}` - è·å–è®¢å•è¯¦æƒ…
- `PUT /api/v1/orders/{order_id}/status` - æ›´æ–°è®¢å•çŠ¶æ€
- `POST /api/v1/orders/{order_id}/confirm` - ç¡®è®¤æ”¶è´§
</details>

<details>
<summary><b>æ¶ˆæ¯ç›¸å…³</b></summary>

- `GET /api/v1/messages/conversations` - è·å–ä¼šè¯åˆ—è¡¨
- `GET /api/v1/messages/conversation/{id}` - è·å–ä¼šè¯æ¶ˆæ¯
- `POST /api/v1/messages/send` - å‘é€æ¶ˆæ¯
- `WS /api/v1/ws/notifications/{user_id}` - WebSocketé€šçŸ¥
</details>

<details>
<summary><b>æ•°æ®åº“åŒæ­¥ç›¸å…³</b></summary>

- `GET /api/v1/sync/status` - è·å–åŒæ­¥çŠ¶æ€
- `POST /api/v1/sync/start` - å¯åŠ¨åŒæ­¥
- `POST /api/v1/sync/stop` - åœæ­¢åŒæ­¥
- `GET /api/v1/sync/conflicts` - è·å–å†²çªåˆ—è¡¨
- `POST /api/v1/sync/conflicts/{id}/resolve` - è§£å†³å†²çª
</details>

---

## ğŸ’» å¼€å‘æŒ‡å—

### å‰ç«¯å¼€å‘

#### ç›®å½•è§„èŒƒ

```
src/
â”œâ”€â”€ components/     # å¯å¤ç”¨ç»„ä»¶
â”œâ”€â”€ views/         # é¡µé¢ç»„ä»¶
â”œâ”€â”€ stores/        # PiniaçŠ¶æ€ç®¡ç†
â”œâ”€â”€ router/        # è·¯ç”±é…ç½®
â”œâ”€â”€ lib/           # å·¥å…·åº“
â””â”€â”€ assets/        # é™æ€èµ„æº
```

#### ç»„ä»¶å¼€å‘è§„èŒƒ

```vue
<template>
  <!-- ä½¿ç”¨ Naive UI ç»„ä»¶ -->
  <n-card>
    <n-button @click="handleClick">æŒ‰é’®</n-button>
  </n-card>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { useMessage } from 'naive-ui'

const message = useMessage()

const handleClick = () => {
  message.success('æˆåŠŸ')
}
</script>

<style scoped>
/* ä½¿ç”¨ scoped æ ·å¼ */
</style>
```

#### å¸¸ç”¨å‘½ä»¤

```bash
npm run dev         # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run build       # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run preview     # é¢„è§ˆç”Ÿäº§æ„å»º
npm run lint        # ä»£ç æ£€æŸ¥
npm run type-check  # ç±»å‹æ£€æŸ¥
```

### åç«¯å¼€å‘

#### ç›®å½•è§„èŒƒ

```
apps/
â”œâ”€â”€ core/          # æ ¸å¿ƒæ¨¡å—ï¼ˆæ•°æ®åº“ã€é…ç½®ã€å®‰å…¨ï¼‰
â”œâ”€â”€ services/      # ä¸šåŠ¡æœåŠ¡ï¼ˆåŒæ­¥ã€WebSocketç­‰ï¼‰
â”œâ”€â”€ *_service/     # å¾®æœåŠ¡æ¨¡å—
â””â”€â”€ api_gateway/   # APIç½‘å…³
```

#### APIå¼€å‘è§„èŒƒ

```python
from fastapi import APIRouter, Depends
from apps.core.security import get_current_user

router = APIRouter()

@router.get("/items")
async def get_items(
    skip: int = 0,
    limit: int = 20,
    current_user = Depends(get_current_user)
):
    """è·å–å•†å“åˆ—è¡¨"""
    # ä¸šåŠ¡é€»è¾‘
    return {"items": []}
```

#### å¸¸ç”¨å‘½ä»¤

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
uvicorn apps.api_gateway.main:app --reload

# åˆ›å»ºæ•°æ®åº“è¿ç§»
alembic revision --autogenerate -m "description"

# æ‰§è¡Œè¿ç§»
alembic upgrade head

# å›æ»šè¿ç§»
alembic downgrade -1

# ä»£ç æ ¼å¼åŒ–
black .

# ä»£ç æ£€æŸ¥
flake8 .
```

### Git å·¥ä½œæµ

```bash
# 1. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/your-feature-name

# 2. å¼€å‘å¹¶æäº¤
git add .
git commit -m "feat: æ·»åŠ xxxåŠŸèƒ½"

# 3. æ¨é€åˆ°è¿œç¨‹
git push origin feature/your-feature-name

# 4. åˆ›å»º Pull Request

# 5. åˆå¹¶ååˆ é™¤åˆ†æ”¯
git branch -d feature/your-feature-name
```

#### Commit è§„èŒƒ

- `feat:` æ–°åŠŸèƒ½
- `fix:` ä¿®å¤bug
- `docs:` æ–‡æ¡£æ›´æ–°
- `style:` ä»£ç æ ¼å¼è°ƒæ•´
- `refactor:` é‡æ„
- `test:` æµ‹è¯•ç›¸å…³
- `chore:` æ„å»º/å·¥å…·ç›¸å…³

---

## â“ å¸¸è§é—®é¢˜

### 1. æ•°æ®åº“è¿æ¥å¤±è´¥

**é—®é¢˜ï¼š** `sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError)`

**è§£å†³ï¼š**
```bash
# æ£€æŸ¥æ•°æ®åº“æœåŠ¡æ˜¯å¦å¯åŠ¨
sudo systemctl status mysql

# æ£€æŸ¥ .env é…ç½®æ˜¯å¦æ­£ç¡®
# æ£€æŸ¥æ•°æ®åº“ç”¨æˆ·æƒé™
mysql -u root -p
GRANT ALL PRIVILEGES ON campus_trading.* TO 'your_user'@'localhost';
FLUSH PRIVILEGES;
```

### 2. å‰ç«¯APIè¯·æ±‚è·¨åŸŸ

**é—®é¢˜ï¼š** `Access to XMLHttpRequest has been blocked by CORS policy`

**è§£å†³ï¼š**
```python
# backend/apps/api_gateway/main.py
# ç¡®ä¿CORSé…ç½®æ­£ç¡®
app.add_middleware(
    CORSMiddleware,
    allow_origins=["http://localhost:5174"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

### 3. WebSocketè¿æ¥å¤±è´¥

**é—®é¢˜ï¼š** WebSocketè¿æ¥æ— æ³•å»ºç«‹

**è§£å†³ï¼š**
```typescript
// æ£€æŸ¥WebSocket URLæ˜¯å¦æ­£ç¡®
const ws = new WebSocket('ws://localhost:8001/api/v1/ws/notifications/1')

// å¦‚æœä½¿ç”¨HTTPSï¼Œéœ€è¦ä½¿ç”¨WSS
const ws = new WebSocket('wss://your-domain.com/api/v1/ws/notifications/1')
```

### 4. å›¾ç‰‡ä¸Šä¼ å¤±è´¥

**é—®é¢˜ï¼š** å›¾ç‰‡ä¸Šä¼ åæ— æ³•è®¿é—®

**è§£å†³ï¼š**
```bash
# æ£€æŸ¥ä¸Šä¼ ç›®å½•æƒé™
sudo chmod -R 755 backend/uploads

# ç¡®ä¿nginxé…ç½®äº†é™æ€æ–‡ä»¶æœåŠ¡
location /uploads {
    alias /var/www/campus-trading/backend/uploads;
}
```

### 5. DockeræœåŠ¡æ— æ³•å¯åŠ¨

**é—®é¢˜ï¼š** `docker-compose up` å¤±è´¥

**è§£å†³ï¼š**
```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
docker-compose logs backend
docker-compose logs frontend

# é‡æ–°æ„å»º
docker-compose down
docker-compose build --no-cache
docker-compose up -d

# æ£€æŸ¥ç«¯å£å ç”¨
sudo lsof -i :8001
sudo lsof -i :5174
```

---

## ğŸ“Š é¡¹ç›®çŠ¶æ€

- **å¼€å‘è¿›åº¦ï¼š** 95% å®Œæˆ
- **ä»£ç é‡ï¼š** 30,000+ è¡Œ
- **APIç«¯ç‚¹ï¼š** 55+
- **å‰ç«¯é¡µé¢ï¼š** 20+
- **å‰ç«¯ç»„ä»¶ï¼š** 35+
- **æ•°æ®åº“è¡¨ï¼š** 12å¼ 

è¯¦ç»†çŠ¶æ€æ¸…å•è¯·æŸ¥çœ‹ï¼š[PROJECT_STATUS.md](PROJECT_STATUS.md)

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

### å¦‚ä½•è´¡çŒ®

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºä½ çš„åŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤ä½ çš„æ”¹åŠ¨ (`git commit -m 'feat: Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ä¸€ä¸ª Pull Request

### ä»£ç è§„èŒƒ

- éµå¾ªç°æœ‰ä»£ç é£æ ¼
- æ·»åŠ é€‚å½“çš„æ³¨é‡Š
- ç¼–å†™æµ‹è¯•ç”¨ä¾‹
- æ›´æ–°ç›¸å…³æ–‡æ¡£

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

## ğŸ‘¥ å¼€å‘å›¢é˜Ÿ

- **é¡¹ç›®ç»´æŠ¤è€…ï¼š** [lll-hhh](https://github.com/lll-hhh)

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼š

- [FastAPI](https://fastapi.tiangolo.com/)
- [Vue.js](https://vuejs.org/)
- [Naive UI](https://www.naiveui.com/)
- [SQLAlchemy](https://www.sqlalchemy.org/)

---

## ğŸ“§ è”ç³»æ–¹å¼

- **é¡¹ç›®åœ°å€ï¼š** https://github.com/lll-hhh/Campus_Trading_System
- **é—®é¢˜åé¦ˆï¼š** [Issues](https://github.com/lll-hhh/Campus_Trading_System/issues)
- **åŠŸèƒ½å»ºè®®ï¼š** [Discussions](https://github.com/lll-hhh/Campus_Trading_System/discussions)

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ª Starï¼â­**

Made with â¤ï¸ by [lll-hhh](https://github.com/lll-hhh)

</div>

---
**ç‰ˆæœ¬:** 2.0 | **æ›´æ–°:** 2025-11-18
